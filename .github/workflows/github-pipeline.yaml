name: Build and Deploy

on:
  workflow_dispatch:
    inputs:
      logLevel:
        description: 'Log level'
        required: true
        default: 'warning'
        type: choice
        options:
        - info
        - warning
        - debug

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2

    - name: Install Node.js and NPM
      uses: actions/setup-node@v2
      with:
        node-version: 14

    - name: Install Dependencies
      run: |
        cd wp-content/themes/twentytwentyone
        npm install

    - name: Build Assets
      run: |
        cd wp-content/themes/twentytwentyone
        npm run build

  deploy:
    needs: build
    runs-on: ubuntu-latest

    steps:
    #- name: rsync deployment
     # # uses: D3rHase/rsync-deploy-action@5af3ec7ad17529c7c223819f54fe0d5cad1357e1
      #uses: D3rHase/rsync-deploy-action@v0.2
      #with:
       # # hostname / IP of the server
        #HOST: 34.154.5.157
        ## ssh port of the server
        #PORT: 36409
        ## user of the server
        #USER: 'christsagalos'
        ## private ssh key registered on the server
        #PRIVATE_SSH_KEY: sh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDxfLBbSMckRl1EiDfOl8JZZXCfTOX1sLCX1myhtWH3OZe41fivqYqFGX6b7Oy8fAoHWOraUpHyVMtZH2Wp0ZGTEiaQIg7c36egMOeLrRdL1kUpxECZUAzpxzLyj1tgzkxxAa9yTnODXpCKjfTqz+Xu+o1cBJbqRKwTnmjiZiJtijt9rVi5gXLlfq2T5arrH3EWhYKLkLujY585/sE6j6RJ9PgZxmDH/36WlORbYdpG8uc0MBQ6ti9fF0jU6pkGTEDfUkCbpFItlGoR+N1f6GNIS7GmoghThCxbaI9nSrX8pNwdXrCcH/7zpie1hvx6NC/M8UgSyafMsH7IaPqHgy5xjHdshLORUp5Cy+CIf7XRxNr2mjk+aK8mVY4Bhr4Bgo6wsUN8iZKjWNj0U8dBw9jA8u3L69yUpAj5kvNf3TAt+rYmjPQTM3mMUHQOIgWQmS8E3pe90L24W1ld2MDj/R1AIYnv2bn/B7vEkqktJZo+t8UECVMwWnGmqxblGmWTqAc= ansible-generated on jpo-christsagalos-live-prod
        ## path of the file-s to deploy
        #REPOSITORY_PATH: ''
    - name: Variables
      run: |
        echo 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 

    - name: ssh deploy
      # uses: easingthemes/ssh-deploy@3884c8554ff45c0fd37d3f12a76288d06ce7a2ff
      uses: easingthemes/ssh-deploy@v4.1.8
      with:
        # Private key part of an SSH key pair
        SSH_PRIVATE_KEY: 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      
        # Remote host
        REMOTE_HOST: 34.154.5.157
        # Remote user
        REMOTE_USER: 'christsagalos'
        # Remote port
        REMOTE_PORT: 36409
        # Source directory, path relative to `$GITHUB_WORKSPACE` root, eg: `dist/`
        # SOURCE: # optional, default is 
        # Target directory
        TARGET: ~/


        

